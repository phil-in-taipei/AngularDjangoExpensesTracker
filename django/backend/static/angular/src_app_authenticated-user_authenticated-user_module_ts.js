"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_app_authenticated-user_authenticated-user_module_ts"],{6005:(Q,A,i)=>{i.r(A),i.d(A,{AuthenticatedUserModule:()=>$});var p=i(9808),l=i(2382),h=i(4394),c=i(2323),m=i(6533),u=i(6479),e=i(5e3),g=i(3702);function C(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onLogout()}),e._uU(2,"Logout"),e.qZA()()}}function T(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onLogout()}),e._uU(2,"Logout"),e.qZA()()}}let F=(()=>{class o{constructor(t){this.authService=t,this.userIsAuthenticated=!1}ngOnInit(){this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(t=>{this.userIsAuthenticated=t})}ngOnDestroy(){this.authListenerSubs.unsubscribe()}onLogout(){this.authService.logout()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authenticated-header"]],decls:15,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","mydropnav"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","mydropnav","bg-dark"],[4,"ngIf"],["routerLink","authenticated-user/user-profile","href","#",1,"dropdown-item","bg-dark"],["href","#",1,"nav-link",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"button",2),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8," JWT Experiment "),e.qZA(),e.TgZ(9,"ul",8),e.YNc(10,C,3,0,"li",9),e.TgZ(11,"li")(12,"a",10),e._uU(13,"Profile"),e.qZA()()()(),e.YNc(14,T,3,0,"li",9),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",r.userIsAuthenticated),e.xp6(4),e.Q6J("ngIf",r.userIsAuthenticated))},directives:[p.O5,m.yS],styles:[""]}),o})(),y=(()=>{class o{constructor(t){this.authService=t,this.userIsAuthenticated=!1}ngOnInit(){this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(t=>{this.userIsAuthenticated=t})}ngOnDestroy(){this.authListenerSubs.unsubscribe()}onLogout(){this.authService.logout()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authenticated-footer"]],decls:23,vars:0,consts:[[1,"mt-5"],[1,"bg-dark","text-center","text-lg-start"],[1,"container","p-4","pb-0"],[1,""],[1,"row"],[1,"col-md-3","col-lg-3","col-xl-3","mx-auto","mt-3"],[1,"text-uppercase","mb-4","font-weight-bold"],[1,"w-100","clearfix","d-md-none"],[1,"col-md-2","col-lg-2","col-xl-2","mx-auto","mt-3"],["routerLink","/authenticated-user/user-profile","href","#"],["href","#",1,"nav-link",3,"click"],[1,"col-md-3","col-lg-2","col-xl-2","mx-auto","mt-3"],[1,"my-3"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"footer",1)(2,"div",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"h6",6),e._uU(7," JWT Angular "),e.qZA(),e.TgZ(8,"p"),e._uU(9,"This is boilerplate for using Angular Refreshing Tokens"),e.qZA()(),e._UZ(10,"hr",7),e.TgZ(11,"div",8)(12,"h6",6),e._uU(13,"JWT Angular Boilerplate"),e.qZA(),e.TgZ(14,"p")(15,"a",9),e._uU(16,"Profile"),e.qZA()(),e.TgZ(17,"p")(18,"a",10),e.NdJ("click",function(){return r.onLogout()}),e._uU(19,"Logout"),e.qZA()()(),e._UZ(20,"hr",7)(21,"div",11),e.qZA()(),e._UZ(22,"hr",12),e.qZA()()())},directives:[m.yS],styles:[""]}),o})(),S=(()=>{class o{constructor(t){this.store=t}ngOnInit(){console.log("initializing the authenticated user component now..."),this.store.dispatch(new u.Ec)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authenticated-user"]],decls:5,vars:0,consts:[[1,"container","content"],[1,"color-frame","rounded"]],template:function(t,r){1&t&&(e._UZ(0,"app-authenticated-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"router-outlet"),e.qZA()(),e._UZ(4,"app-authenticated-footer"))},directives:[F,m.lC,y],styles:[""]}),o})();const M=(0,c.ZF)("user"),U=(0,c.P1)(M,o=>o.usrProfile);function E(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1,"Please enter an email."),e.qZA())}function w(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1,"Please enter your surname."),e.qZA())}function L(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1,"Please enter your given name."),e.qZA())}let I=(()=>{class o{constructor(t){this.store=t,this.closeEvent=new e.vpe}ngOnInit(){}onSubmitEditedProfile(t){if(t.invalid)return t.reset(),void this.closeEvent.emit(!1);this.store.dispatch(new u.Ix({submissionForm:{contact_email:t.value.contact_email,given_name:t.value.given_name,surname:t.value.surname}})),t.resetForm(),this.closeEvent.emit(!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-profile-form"]],inputs:{profile:"profile"},outputs:{closeEvent:"closeEvent"},decls:27,vars:6,consts:[[3,"submit"],["profileForm","ngForm"],["name","contact_email","type","email","required","","text","","minlength","5","ngModel","",1,"form-control",3,"placeholder"],["contact_email","ngModel"],[4,"ngIf"],["type","text","minlength","2","rows","4","name","surname","ngModel","","required","",1,"form-control",3,"placeholder"],["surname","ngModel"],["type","text","minlength","3","rows","4","name","given_name","ngModel","","required","",1,"form-control",3,"placeholder"],["given_name","ngModel"],["type","submit",1,"btn","btn-outline-secondary"]],template:function(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("submit",function(){e.CHM(s);const a=e.MAs(1);return r.onSubmitEditedProfile(a)}),e.TgZ(2,"div")(3,"label"),e._uU(4,"Email"),e.qZA(),e._UZ(5,"input",2,3),e.YNc(7,E,2,0,"div",4),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"div")(10,"label"),e._uU(11,"Surname"),e.qZA(),e._UZ(12,"input",5,6),e.YNc(14,w,2,0,"div",4),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"div")(17,"label"),e._uU(18,"Given Name"),e.qZA(),e._UZ(19,"input",7,8),e.YNc(21,L,2,0,"div",4),e.qZA(),e._UZ(22,"hr"),e.TgZ(23,"div")(24,"button",9),e._uU(25,"Submit"),e.qZA()(),e._UZ(26,"br"),e.qZA()}if(2&t){const s=e.MAs(6),d=e.MAs(13),a=e.MAs(20);e.xp6(5),e.s9C("placeholder",r.profile.contact_email),e.xp6(2),e.Q6J("ngIf",s.touched&&s.invalid),e.xp6(5),e.s9C("placeholder",r.profile.surname),e.xp6(2),e.Q6J("ngIf",d.touched&&d.invalid),e.xp6(5),e.s9C("placeholder",r.profile.given_name),e.xp6(2),e.Q6J("ngIf",a.touched&&a.invalid)}},directives:[l._Y,l.JL,l.F,l.Fj,l.Q7,l.wO,l.JJ,l.On,p.O5],styles:[""]}),o})();function O(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),e._uU(4),e.ALo(5,"uppercase"),e.qZA()(),e._UZ(6,"hr"),e.TgZ(7,"table",4)(8,"tr")(9,"th")(10,"h3"),e._uU(11,"Name"),e.qZA()(),e.TgZ(12,"td")(13,"h3"),e._uU(14),e.qZA()()(),e.TgZ(15,"tr")(16,"th")(17,"h3"),e._uU(18,"Email"),e.qZA()(),e.TgZ(19,"td")(20,"h3"),e._uU(21),e.qZA()()()(),e._UZ(22,"hr"),e.TgZ(23,"div",5)(24,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleForm()}),e._uU(25),e.qZA()(),e._UZ(26,"hr"),e.TgZ(27,"div",7)(28,"app-edit-profile-form",8),e.NdJ("closeEvent",function(s){return e.CHM(t),e.oxw().closeFormHander(s)}),e.qZA()(),e._UZ(29,"br"),e.qZA()()}if(2&o){const t=n.ngIf,r=e.oxw();e.xp6(4),e.AsE("Profile of: ",e.lcZ(5,8,t.user.username[0]),"",t.user.username.substring(1),""),e.xp6(10),e.AsE(" ",t.given_name," ",t.surname," "),e.xp6(7),e.Oqu(t.contact_email),e.xp6(4),e.hij(" ",r.showForm?"No thanks, I'll Edit My Profile Later":"Edit Profile"," "),e.xp6(2),e.Q6J("hidden",!r.showForm),e.xp6(1),e.Q6J("profile",t)}}const q=[{path:"",component:S,children:[{path:"user-profile",component:(()=>{class o{constructor(t){this.store=t,this.showForm=!1}ngOnInit(){console.log("initializing the profile component now..."),this.usrProfile$=this.store.pipe((0,c.Ys)(U))}toggleForm(){this.showForm=!this.showForm}closeFormHander(t){this.showForm=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-profile"]],decls:3,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"table-responsive"],[1,"container","mt-1","pt-1"],[1,"profile-table",2,"width","100%"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[3,"hidden"],[3,"profile","closeEvent"]],template:function(t,r){1&t&&(e.TgZ(0,"div"),e.YNc(1,O,30,10,"div",0),e.ALo(2,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.usrProfile$)))},directives:[p.O5,I],pipes:[p.Ov,p.gd],styles:["h1[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{border:1px solid #758d97;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;border-bottom:1pt solid #758d97;padding:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1em}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;padding:1em}hr.thick-or[_ngcontent-%COMP%]{border:2px solid #cb410b}hr.thin-white[_ngcontent-%COMP%]{border:1px solid white}"]}),o})()},{path:"**",redirectTo:"/user-profile"}]}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),o})();var Z=i(2843),k=i(1365),N=i(9300),_=i(5577),f=i(4004),b=i(262),v=i(520),x=i(2340);let Y=(()=>{class o{constructor(t,r){this.http=t,this.authService=r}fetchUserProfile(){let t=this.authService.getAuthToken();return this.http.get(`${x.N.apiUrl}/api/profiles/user-profile/`,{headers:new v.WM({Authorization:`Token ${t}`})}).pipe((0,f.U)(r=>r))}editUserProfile(t){let r=this.authService.getAuthToken();return this.http.patch(`${x.N.apiUrl}/api/profiles/user-profile/`,t,{headers:new v.WM({Authorization:`Token ${r}`})}).pipe((0,f.U)(s=>s))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(v.eN),e.LFG(g.e))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),H=(()=>{class o{constructor(t,r,s){this.actions$=t,this.userService=r,this.store=s,this.loadUserProfile$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(u.xx.UserProfileRequested),(0,k.M)(this.store.pipe((0,c.Ys)(U))),(0,N.h)(([d,a])=>!a),(0,_.z)(d=>this.userService.fetchUserProfile().pipe((0,f.U)(a=>new u.LN({usrProfile:a})),(0,b.K)(a=>(0,Z._)(()=>a)))))),this.submitEditedProfile$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(u.xx.UserProfileSubmitted),(0,_.z)(d=>this.userService.editUserProfile(d.payload.submissionForm).pipe((0,f.U)(a=>new u.eV({usrProfile:a})),(0,b.K)(a=>(0,Z._)(()=>a))))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eX),e.LFG(Y),e.LFG(c.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const P={userProfileLoaded:!1,usrProfile:void 0};function z(o=P,n){switch(n.type){case u.xx.UserProfileCleared:return P;case u.xx.UserProfileLoaded:case u.xx.UserProfileSaved:return{userProfileLoaded:!0,usrProfile:n.payload.usrProfile};default:return o}}let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,l.u5,J,c.Aw.forFeature("user",z),h.sQ.forFeature([H])]]}),o})()}}]);